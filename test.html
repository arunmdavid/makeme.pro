<html>
  <body>
Test page
<script>
  
  (function () {
    window.onMessage = function (message) {
      document.getElementById('message').innerHTML = message;
    };
  }());
  (function() {
  var originalPostMessage = window.postMessage;

  var patchedPostMessage = function(message, targetOrigin, transfer) { 
    originalPostMessage(message, targetOrigin, transfer);
  };

  patchedPostMessage.toString = function() { 
    return String(Object.hasOwnProperty).replace('hasOwnProperty', 'postMessage'); 
  };

  window.postMessage = patchedPostMessage;
})();
  
</script>
<div id='message'></div>
    <div onclick="window.postMessage('test','*');alert(1);">post</div>
  </body>
</html>
